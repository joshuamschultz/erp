<div class="widget">
    <!-- Widget heading -->
    <div class="widget-head">
        <div class="row-fluid">
            <h4 class="span6 heading">Listing reconciles</h4>
        </div> 
    </div>
    <!-- // Widget heading END -->
    <div>Balance : <label id="balance"><%= @balance %></label></div>
    <div class="widget-body">
        <table id="table_report_reconcile_list" class="dynamicTable table table-striped table-bordered table-condensed">
            <thead>
                <tr> 
                    <th>Id</id>
                    <th>Tag</th>
                    <th>Reconcile Type</th>
                    <th>Payment</th> 
                    <th>Deposit check</th>
                    <th>Printing screen</th>
                    <th>Amount</th>
                    <th>Checked</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>                
            </tbody>
        </table>
        <input type="button" value="Reconcile" onclick="set_quote_status();"></input>
    </div>
</div>

<%= render :partial => 'layouts/app_layouts/data_table', :locals => 
    {:name => "table_report_reconcile_list", :path => reconciles_path, :extras => {:slno => false},
        :columns => '[
                        { "mData": "ids" },
                        { "mData": "tag" },
                        { "mData": "reconcile_type" },
                        { "mData": "payment_name" },
                        { "mData": "deposit_check_name" },
                        { "mData": "printing_screen_name" },                        
                        { "mData": "payment_amt" }, 
                        { "mData": "checkboxes" },
                        { "mData": "links", "bSortable": false, "bSearchable": false }
                    ]'
    } 
%>


<script type="text/javascript">
    function calcBalance(i, op){
       
        var x=document.getElementById(i).value;

        var y=document.getElementById("balance").innerHTML;

        if(document.getElementById(i).checked ){
        tot = parseInt(y)+parseInt(x);
        document.getElementById("balance").innerHTML = tot;
        }
        else{
        tot = parseInt(y)-parseInt(x);
        document.getElementById("balance").innerHTML = tot;
        }      

    }
    function set_quote_status(){
        var selected = [];
        $('#table_report_reconcile_list_wrapper input:checked').each(function() {        
          selected.push($(this).attr('id'));
        });
        
       initialize_api_call({"url": "/common_actions/get_info", "type": "GET", "data_type": "json", "params": {"mode": "process_reconcile", "reconcile_ids" : selected }}, "reconcile_result", {});
    }
    function reconcile_result(response, callback_params, api_params){

        

    }  
</script>
