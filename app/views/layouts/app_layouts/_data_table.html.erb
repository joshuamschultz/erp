<%# extras ||= {:slno => true, :grouping => false } %>

<% extras ||= {} %>
<% extras[:slno] = true if extras[:slno].nil?  %>
<% extras[:grouping] = false if extras[:grouping].nil? %>

<script type="text/javascript">
    $(document).ready(function(){ 
        var data_table = $('#<%= name %>').dataTable({
            <% if extras[:slno] %>
                "aaSorting": [[ 1, 'asc' ]],
                "fnDrawCallback": function ( oSettings ) {
                    /* Need to redo the counters if filtered or sorted */
                    if ( oSettings.bSorted || oSettings.bFiltered )
                    {
                        for ( var i=0, iLen=oSettings.aiDisplay.length ; i<iLen ; i++ )
                        {
                            $('td:eq(0)', oSettings.aoData[ oSettings.aiDisplay[i] ].nTr ).html( i+1 );
                        }
                    }
                },
            <% end %>
            "bAutoWidth": false,
            "bProcessing": true,
            "sAjaxSource": '<%= path %>',
            "aoColumns": <%= columns.html_safe %>            
        });

        <% if extras[:grouping] %>
            data_table.rowGrouping({
                "iGroupingColumnIndex": extras[:column_index]
            });
        <% end %>
    });
</script>