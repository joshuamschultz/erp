<!-- Widget -->
<div class="widget">
    <!-- Widget heading -->
    <div class="widget-head">
        <div class="row-fluid">
            <h4 class="span6 heading">Owners</h4>
            <span class="span6 heading right">
            <% if can? :edit, Owner %>
                <%= link_to 'New Owner', new_owner_path, :class => "btn btn-mini btn-success" %>
            <% end %>
            </span>
        </div> 
    </div>
    <!-- // Widget heading END -->

    <div class="widget-body">
        <table id="table_report" class="dynamicTable table table-striped table-bordered table-condensed">
            <thead>
              <tr>
                <th>SLNO</th>
                <th>Name</th>
                <th>Description</th>
                <th>Commission Type</th>
                <th>Commission Percentage</th>
                <th>Active</th>
                <th></th>
              </tr>
            </thead>

            <tbody>
                
            </tbody>
        </table>
    </div>
</div>

<%= render :partial => 'layouts/app_layouts/data_table', :locals => 
    {
        :name => "table_report", :path => owners_path,
        :columns => '[
                        { "mData": "id" },
                        { "mData": "owner_identifier" },
                        { "mData": "owner_description" },
                        { "mData": "owner_commission_type" },
                        { "mData": "owner_commission_percentage"},
                        { "mData": "owner_active" },
                        { "mData": "links", "bSortable": false, "bSearchable": false }
                    ]'
    } 
%>

<script type="text/javascript">
    // var data_table_report;
    
    // $(document).ready(function(){ 
    //     data_table_report = $('#table_report').dataTable({
    //             "aaSorting": [[ 1, 'asc' ]],
    //             "fnDrawCallback": function ( oSettings ) {
    //                 /* Need to redo the counters if filtered or sorted */
    //                 if ( oSettings.bSorted || oSettings.bFiltered )
    //                 {
    //                     for ( var i=0, iLen=oSettings.aiDisplay.length ; i<iLen ; i++ )
    //                     {
    //                         $('td:eq(0)', oSettings.aoData[ oSettings.aiDisplay[i] ].nTr ).html( i+1 );
    //                     }
    //                 }
    //             },
    //         "bAutoWidth": false,
    //         "bProcessing": true,
    //         "bServerSide": true,
    //         "iTotalRecords": <%= Owner.count %>,
    //         "iTotalDisplayRecords": 10,
    //         "sAjaxSource": '/owners',
    //         "aaSorting": [[0, "asc"]],
    //         "aoColumns": [
    //                     { "mData": "id" },
    //                     { "mData": "owner_identifier" },
    //                     { "mData": "owner_description" },
    //                     { "mData": "owner_commission_type" },
    //                     { "mData": "owner_commission_percentage"},
    //                     { "mData": "owner_active" },
    //                     { "mData": "links", "bSortable": false, "bSearchable": false }
    //                 ]        
    //     });

    // });
</script>